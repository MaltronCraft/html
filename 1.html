    <script type="text/javascript">
  isRemoveAdSwfJWPLayer = false;
  // we will define this varialbe signUpURLABTest in experiments.js
	var cmg_upg_days_limit = 180;
	var user_dst = window.location.pathname;
	user_dst = user_dst.replace("\/", "");
  if(window.location.host !== 'cmatgame.local') {
    if(typeof signUpURL === 'undefined' || signUpURL === '') {
    	signUpURL = '/signup/b2df5a33?origin='+ user_dst;
  	} else {
  	  signUpURL = signUpURL+'?origin='+ user_dst;
  	}
  } else if(typeof signUpURLABTest === "undefined" || signUpURLABTest === null ) {
		signUpURL = 'https://' + window.location.hostname +'/signup/b2df5a33?origin='+ user_dst;
	} else {
		signUpURL =  signUpURLABTest;
	}

  function subscription_promo_handler() {
    if(typeof freeTrialUser !== 'undefined' && freeTrialUser) {
    	trackEvent('Premium Subscription ' +subscriberLeg, 'Subscription overlay clicked', userPlayedGames);
    }
  	return;
	}
  function subscriptionSignUpUrl() {
	  var user_played_games = '';
	  var zeroFreeGamesLeftUsers =localStorage.getItem("zeroFreeGamesLeftUsers");
		if(typeof userPlayedGames !== 'undefined' && userPlayedGames) {
		  user_played_games = "upg=" +userPlayedGames;
		} else {
		  user_played_games = "upg=0";
		}
		if(zeroFreeGamesLeftUsers !== null && user_played_games !== '') {
		  user_played_games = user_played_games + '&zfg='+zeroFreeGamesLeftUsers;
		} else if(zeroFreeGamesLeftUsers !== null) {
		  user_played_games = 'zfg='+zeroFreeGamesLeftUsers;
		}
		
		if(typeof signUpURL !== 'undefined' && signUpURL !== null && signUpURL.indexOf('upg') === -1) {
			if(signUpURL.indexOf('?random_true') > -1) {
			  signUpURL = signUpURL.replace('?random_true', '');
			}
			if(signUpURL.indexOf('?') > -1) {
			  signUpURL = signUpURL + '&' +user_played_games;
			} else {
			  signUpURL = signUpURL + '?' +user_played_games;
			}
		}
	}
  function removePrerollAndDisplayGame() {
    //console.log('remove ad swf');
    if(isRemoveAdSwfJWPLayer) { //remove preroll only once
      console.log('ad swf player already removed');
    } else { 
      console.log('removeAdSwfJWPLayer called');
      // destroys video player completely
      if(typeof Bolt !== 'undefined') {
        Bolt.removeVideo( 'cmg-player' , true );
      }
      jQuery("#my-content").css("opacity","1");
      clearInterval(intervalId);
      jQuery("#afg_container").remove();
      jQuery("#afg_preloader").remove();
      jQuery("#continue-container").remove();
      
      if(!Drupal.settings.swfembed) {
        console.log('removeAdSwfJWPLayer: html5 game');
        //html5 game
      //game width, game height and game type
      game_width = jQuery("#html5game").attr("width");
      game_height = jQuery("#html5game").attr("height");
      game_type = "html5";
      // IE Detection and Version grabbing
      ie = false;
      var html5_game_url = jQuery("#html5game").attr("src");
      var swf_game_url = jQuery("#swfgame").attr("src");
      
      if(typeof swf_game_url !== 'undefined') {
      if(!checkIfFlashIsEnabled()){
          //console.log('flash is undefined');
          flashDetectionMessage();
        }
      }
      
      if(typeof swf_game_url !== 'undefined' && swf_game_url.indexOf("//") === 0) {
        swf_game_url = window.location.protocol + swf_game_url;
      } else if(typeof swf_game_url !== 'undefined' && swf_game_url.indexOf("//")  > 0) {
        swf_game_url = swf_game_url.replace("http:",window.location.protocol);  
      }
      if(typeof html5_game_url !== 'undefined' && html5_game_url.indexOf("//") === 0) {
        html5_game_url = window.location.protocol + html5_game_url;
      } else if(typeof html5_game_url !== 'undefined' && html5_game_url.indexOf("//")  > 0) {
        html5_game_url = html5_game_url.replace("http:",window.location.protocol);  
      }
      if (navigator.appName == "Microsoft Internet Explorer") {
          ie = true;
          var ua = navigator.userAgent;
          var re = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
          if (re.exec(ua) != null) {
              ieVersion = parseInt(RegExp.$1)
          }
      }
      
          if(ie && ieVersion < 9) {
              nothtml5browser = '<div style="margin-top:20px;color: #f5e61f;line-height:1.1em;font-size: 1.867em;">Hey, you\'re using an older web browser that can\'t play HTML5 games like this one.<br><br>Please switch to another browser or just enjoy a different Coolmath game!</div><br><p style="font-size:1.6em;color:#0E83D4;font-weight:bold;">&#8226; <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie" target="_new">Get a new Internet Explorer browser from Microsoft</a></p>';
              jQuery("#html5game").replaceWith(nothtml5browser);
          jQuery("#swfgame").replaceWith(nothtml5browser);
          } else {
              
              newiframe = '<iframe id="html5game" src="' +  html5_game_url + '" class="' + jQuery("#html5game").attr("class") +'" width="' + jQuery("#html5game").attr("width") +'" height="' + jQuery("#html5game").attr("height") +'" scrolling="no" marginwidth="0" vspace="0" frameborder="0" hspace="0" marginheight="0"></iframe>';
          newswfiframe = '<iframe id="swfgame" src="' +  swf_game_url + '" class="' + jQuery("#swfgame").attr("class") +'" width="' + jQuery("#swfgame").attr("width") +'" height="' + jQuery("#swfgame").attr("height") +'" scrolling="no" marginwidth="0" vspace="0" frameborder="0" hspace="0" marginheight="0"></iframe>';
              if(typeof isRemoveAdSwfJWPLayer === "undefined" ||  !isRemoveAdSwfJWPLayer) {
                 jQuery("#html5game").replaceWith(newiframe);
           if(checkIfFlashIsEnabled()) {
             jQuery("#swfgame").replaceWith(newswfiframe);
           }
              }   
          } 
      } else {
        console.log('removeAdSwfJWPLayer: flash game');
        if(!checkIfFlashIsEnabled()){
          //console.log('flash is undefined');
          /* CLSS-1614 to load html5 as backup - START */
        var html5_game_url = jQuery("#html5game").attr("src");
        if(typeof html5_game_url !== 'undefined') {
          console.log('removeAdSwfJWPLayer: html5 game as backup if flash is diabled');
          game_width = jQuery("#html5game").attr("width");
            game_height = jQuery("#html5game").attr("height");
            game_type = "html5";
         // IE Detection and Version grabbing
            ie = false;
        if(typeof html5_game_url !== 'undefined' && html5_game_url.indexOf("//") === 0) {
              html5_game_url = window.location.protocol + html5_game_url;
            } else if(typeof html5_game_url !== 'undefined' && html5_game_url.indexOf("//")  > 0) {
              html5_game_url = html5_game_url.replace("http:",window.location.protocol);  
            }
            if (navigator.appName == "Microsoft Internet Explorer") {
             ie = true;
             var ua = navigator.userAgent;
             var re = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
             if (re.exec(ua) != null) {
              ieVersion = parseInt(RegExp.$1)
             }
           }
           if(ie && ieVersion < 9) {
              nothtml5browser = '<div style="margin-top:20px;color: #f5e61f;line-height:1.1em;font-size: 1.867em;">Hey, you\'re using an older web browser that can\'t play HTML5 games like this one.<br><br>Please switch to another browser or just enjoy a different Coolmath game!</div><br><p style="font-size:1.6em;color:#0E83D4;font-weight:bold;">&#8226; <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie" target="_new">Get a new Internet Explorer browser from Microsoft</a></p>';
              jQuery("#html5game").replaceWith(nothtml5browser);
           } else {
              newiframe = '<iframe id="html5game" src="' +  html5_game_url + '" class="' + jQuery("#html5game").attr("class") +'" width="' + jQuery("#html5game").attr("width") +'" height="' + jQuery("#html5game").attr("height") +'" scrolling="no" marginwidth="0" vspace="0" frameborder="0" hspace="0" marginheight="0"></iframe>';
          if(typeof isRemoveAdSwfJWPLayer === "undefined" ||  !isRemoveAdSwfJWPLayer) {
            jQuery("#html5game").replaceWith(newiframe);
          }
            }
          } else {
          /* CLSS-1614 to load html5 as backup - END */
         flashDetectionMessage();
        } 
        } else {
            //flash game
            //game width, game height and game type
            game_width = Drupal.settings.swfembed.swf.swf_1.width;
            game_height = Drupal.settings.swfembed.swf.swf_1.height;
            game_type = "flash";
          
            if(typeof isRemoveAdSwfJWPLayer === "undefined" || !isRemoveAdSwfJWPLayer) {
             var swf_game_url = jQuery("#swfgame").attr("src");
              if(typeof swf_game_url !== 'undefined' && swf_game_url.indexOf("//") === 0) {
                swf_game_url = window.location.protocol + swf_game_url;
              } else if(typeof swf_game_url !== 'undefined' && swf_game_url.indexOf("//")  > 0) {
                swf_game_url = swf_game_url.replace("http:",window.location.protocol);  
              }
              console.log("removeAdSwfJWPLayer: New swf implementation iFrame attr src "+swf_game_url);
              newswfiframe = '<iframe id="swfgame" src="' +  swf_game_url + '" class="' + jQuery("#swfgame").attr("class") +'" width="' + jQuery("#swfgame").attr("width") +'" height="' + jQuery("#swfgame").attr("height") +'" scrolling="no" marginwidth="0" vspace="0" frameborder="0" hspace="0" marginheight="0"></iframe>';
              jQuery("#swfgame").replaceWith(newswfiframe);
              
              
              var gameInstructions = document.getElementById('game-instructions');
              //insert fix flash div before game instructions field
              if(typeof gameInstructions !== 'undefined' && gameInstructions !== null && typeof gameInstructions.innerHTML !== 'undefined' && gameInstructions.innerHTML !== null) {
                gameInstructions.innerHTML = '<div class="no-flash">If this flash game doesn\'t work on your computer, go <a href="/fix-flash.html">here</a> for help.</div><br><br>' + gameInstructions.innerHTML;
              }
            }

          isRemoveAdSwfJWPLayer = true;   
        } 
      }
    }
  }


  function cmatgame_premium_subscription_game_display() {
    var cmatgame_subscriber = getCookie('cmg_sx');
    var validSubscriber = false;
   	if(typeof cmatgame_subscriber !== 'undefined' && cmatgame_subscriber !== null ) {
   	 validSubscriber = true;
   	}
   	if(typeof subscribeNowAlienClass === 'undefined' || subscribeNowAlienClass === null || subscribeNowAlienClass === '') {
      if(Drupal.settings.isSubscriptionActive == false) {
        subscribeNowAlienClass = "subscribe-now-alien-subscribe";
      }else {
        subscribeNowAlienClass = "subscribe-now-alien-signup";
      }
    }
  	freeGamesExceeded = true;
  	
  		//display Ads to anonymous users the time from 7am to 13pm, display ads to anonymous users
  		//	from 13pm to 11:59pm and 00 to 7am only if the user is not from New York city
  		//	TODO -->	Need to add day of the week for school hours logic, day < 6 
      //do not display Ads when GDPR cookie is set abd GDPR_All cookie is not set
      if(validSubscriber) {
        removePrerollAndDisplayGame();
      } else if( getCookie('cmg_schwl') !== null || typeof cmg_no_ads !== 'undefined' || (!validSubscriber && schoolHours  || ( !schoolHours && !targetStateUser )  || ( !schoolHours && targetStateUser && getCookie('cmg_active_anonymous_user') !== null) ) ) {
  			//TODO Display Game
  			removePrerollAndDisplayGame();
  			if(!/0-chess/.test(window.location.pathname)) {
  				//setCookie('cmg_active_anonymous_user', 'active', 30*60*1000);
  			}
  		} else if(!validSubscriber && !schoolHours && targetStateUser && getCookie('cmg_active_anonymous_user') === null && getCookie('cmg_editor') === null) {
  			//if user comes from google dont show the subscription paywall
  			var ref = document.referrer;
  			//count number of games played by the user this month
  			userPlayedGames = 0;
  			var userFreeGameList = [];
  			var freeGameNid = 2441;
  			if(sessionStorage.getItem("userFreeGameList") !== null) {
  				userFreeGameList = JSON.parse(sessionStorage.getItem("userFreeGameList"));
  			}
  			if((localStorage.getItem("userPlayedGames") == null || getCookie('cmg_upg') === null) && freeGameLimit !== 0 ) {
  				userPlayedGames = 1;
  				localStorage.setItem("userPlayedGames",userPlayedGames);
  				//TODO monthly cookie
  				setCookie('cmg_upg', 'true', cmg_upg_days_limit * 24*60*60*1000);
  				userFreeGameList = [freeGameNid];
  				sessionStorage.setItem("userFreeGameList", JSON.stringify(userFreeGameList));
  				//TODO Display Game
  				removePrerollAndDisplayGame();

  			} else {
					//userPlayedGames = parseInt(localStorage.getItem("userPlayedGames"+currentMonth+currentYear));
					//Monthly limit
					if(localStorage.getItem("userPlayedGames") !== null && getCookie('cmg_upg') !== null) {
						userPlayedGames = parseInt(localStorage.getItem("userPlayedGames"));
					} else {
						userPlayedGames = 0;
						setCookie('cmg_upg', 'true', cmg_upg_days_limit * 24*60*60*1000);
					}
  				if(freeGameLimit != 0 && userPlayedGames < freeGameLimit && userFreeGameList.indexOf(freeGameNid) === -1) {
  					userPlayedGames++;
	 					freeGamesExceeded = false;
  					if(userFreeGameList.length > 0) {
  						userFreeGameList = userFreeGameList.concat(freeGameNid);
  					} else {
  					  userFreeGameList = [freeGameNid];
  					}
  					localStorage.setItem("userPlayedGames",userPlayedGames);
  					sessionStorage.setItem("userFreeGameList", JSON.stringify(userFreeGameList));
  				} else {
  					freeGamesExceeded = true;
  				}
  				//console.log("Number of games user has played "+ userPlayedGames );
  				var validReferer = false;
  				var validGameSession = false;
  				if(userFreeGameList.indexOf(freeGameNid) > -1) {
  				  validGameSession = true;
  				}
  				if(ref.match("google.com") !== null || ref.match("yahoo.com") !== null || ref.match("bing.com") !== null) {
  				  validReferer = true;
  				}
  				subscriptionSignUpUrl();
  				if(!validReferer && userPlayedGames >= freeGameLimit && !validGameSession) { //subscription paywall
  					//block anonymous users for New York City from 0-7am and 13pm to 11:59pm
  					//console.log("Free games limit exceeded and referer is not google");
  					clearInterval(intervalId);
  					jQuery("#afg_container").remove();
  					jQuery(".title-instructions").remove();
  					jQuery(".body-instructions").remove();
            var alreadySubscriberText = '<p class="already-subscribed">Already a Subscriber? <a class="learn-more-link" href="/user/login">Login</a></p>';
            if(getCookie('cmg_l') != null) {
              alreadySubscriberText = '';
            }
            var headLine = '<p class="no-free-games-headline">Please Sign up to keep playing</p>';
            if(Drupal.settings.isSubscriptionActive == false && getCookie('cmg_l') != null) {
              headLine = '<p class="no-free-games-headline" style="padding-top:46px;">PLEASE SUBSCRIBE NOW TO KEEP PLAYING</p>';
            }
            jQuery(".field-game").html('<div class="subscription-overlay" style="height:360px;width:500px;background:#008aa3;white-space:normal;">'+
                headLine +
                '<p class="free-in-schools">The World\'s Best Collection of Games <br> For Logic, Reasoning & Fun.  '+
                '<a class="'+ subscribeNowAlienClass +'" onclick="subscription_promo_handler();" href="' + signUpURL + ' ">Subscribe Now</a>' +
                alreadySubscriberText + '</div>');
                jQuery("#videoplayer").remove();
                } else {
  					//console.log("User may have come from google or is within the free game limit "+ (freeGameLimit-userPlayedGames) );
  					//TODO Display Game
  					removePrerollAndDisplayGame();
  				}
  			}
  	}
	}

</script>
<article class="game-field-wrapper node-2441 node node-game view-mode-full game-w-summary clearfix" about="/0-ship-loader" typeof="sioc:Item foaf:Document">
      <header>
                  <span property="dc:title" content="Ship Loader" class="rdf-meta element-hidden"></span>
          </header>
      <input type="hidden" id="gamerating" name="gamerating" value="" />
  <input type="hidden" id="percentlike_vote" name="percentlike_vote" value="yes" />
  	<script>
	  	function unlockAllLevels() {
        trackEvent('Unlock All Levels category', 'unlock all levels button clicked', document.title);
	  		alllevels = '<div class="adobe-analytics-sub-experience levels-unlocked">levels-unlocked</div>';
	  		jQuery("#subscriber-banner").replaceWith(alllevels);
	  		var cmgorigindomain = /coolmath-games/;
	  		var cmgtargetdomain = window.location.protocol+'//www.coolmath-games.com';
	  		if(/edit-stage/.test(window.location.hostname)) {
	  		  cmgtargetdomain = window.location.protocol + '//edit-stage.coolmath-games.com';
	  		} else if(/stage/.test(window.location.hostname)) {
	  		  cmgtargetdomain = window.location.protocol + '//stage.coolmath-games.com';
	  		} else if(/cmatgame.local|dev.coolmath.games.com/.test(window.location.hostname)) {
	  		  cmgtargetdomain = window.location.protocol + '//stage.coolmath-games.com';
	  		}
	  		if(game_type == "html5") {
		  		document.getElementById("html5game").contentWindow.unlockAllLevels();
		  	} else {
		  	  if(cmgorigindomain.test(window.location.hostname)) {
			  		document.getElementById("swfObjID").unlockAllLevels();
		  	  } else {
  			  	var recievergameFrame = document.getElementById("swfgame");
  			  	gDate = new Date();
  				  console.log("Game Parent - unlockAllLevels: posting unlock message to iFrame: "+gDate +" Timestamp: "+gDate.getTime() );
  			  	recievergameFrame.contentWindow.postMessage('unlockAllLevels', cmgtargetdomain);//TODO -- put target origin
		  	  }
		    }
	  	}
      function addSubToUnlockGAEvent(){
        trackEvent('Unlock All Levels category', 'subscribe to unlock button clicked', document.title);
          window.location.href = "http://www.coolmathgames.com/signup/b2df5a33?origin=node/2441&stual=1"      
        }
    </script>

  
  <div id="no-flash-overlay" style="display:none;">
  	<a href="http://www.adobe.com/go/getflashplayer" target="_blank"><img src="/sites/cmatgame/files/enable-flash/enable-flash-light-blue-transparent.png" alt="click to enable flash" /></a>
  	<div class="bottom-text"><p>If that doesn't work, <a href="/fix-flash" class="fix-flash-2">go here for more help.</a></div>  	
  	<!-- <div class="bottom-text"><p>Want great games that don't require Flash? <a href="/1-html5-games" class="html5-games-link">Check out our HTML5 Games!</a></div> -->
  </div>

  


    	<script>
	  hide_preroll_ads = false;
	  var cmg_active_anonymous_user = getCookie('cmg_active_anonymous_user');
	  if(cmg_active_anonymous_user != null && !/0-chess/.test(window.location.pathname)) {
	  	//setCookie('cmg_active_anonymous_user', 'active', 30*60*1000);
	  }
	  </script>

	  <div id="afg_container">
		      <style>
				.load-wrap {
				  width: 100%;
				}

				.circle {
					display: inline-block;
				  height: 15px;
				  width: 15px;
				  margin-right: 20px;
				  background-color: #fc6e51;
				  border-radius: 50%;
				  -webkit-animation: afg_container_loading 1.6s infinite;
				  -moz-animation: afg_container_loading 1.6s infinite;
				  -o-animation: afg_container_loading 1.6s infinite;
				  animation: afg_container_loading 1.6s infinite;
				}

				.load-wrap .circle:nth-child(3) {
				  -webkit-animation-delay: .1s;
				  -moz-animation-delay: .1s;
				  -o-animation-delay: .1s;
				  animation-delay: .1s;
				  background: #f8eb13;
				  margin: -40px 5px 40px 340px;
				}

				.load-wrap .circle:nth-child(4) {
				  -webkit-animation-delay: .3s;
				  -moz-animation-delay: .3s;
				  -o-animation-delay: .3s;
				  animation-delay: .3s;
				  background: #33a2da;
				  margin: -40px 5px 40px ;
				}

				.load-wrap .circle:nth-child(5) {
				  -webkit-animation-delay: .5s;
				  -moz-animation-delay: .5s;
				  -o-animation-delay: .5s;
				  animation-delay: .5s;
				  background: #ee3928;
				  margin: -40px 5px 40px ;
				}

				.load-wrap .circle:nth-child(6) {
				  -webkit-animation-delay: .7s;
				  -moz-animation-delay: .7s;
				  -o-animation-delay: .7s;
				  animation-delay: .7s;
				  background: #51b747;
				  margin: -40px 5px 40px ;
				}

				/* Keyframes */

				@-webkit-keyframes afg_container_loading {
				  0%, 100% {
				    -webkit-transform: scale(0.0);
				  }
				  50% {
				    -webkit-transform: scale(1.0);
				  }
				}

				@-moz-keyframes afg_container_loading {
				  0%, 100% {
				    -moz-transform: scale(0.0);
				  }
				  50% {
				    -moz-transform: scale(1.0);
				  }
				}

				@-o-keyframes afg_container_loading {
				  0%, 100% {
				    -o-transform: scale(0.0);
				  }
				  50% {
				    -o-transform: scale(1.0);
				  }
				}

				@keyframes afg_container_loading {
				  0%, 100% {
				    transform: scale(0.0);
				  }
				  50% {
				    transform: scale(1.0);
				  }
				}
			  </style>

	          <div class="load-wrap">
  		       <script>
  		          // IE Detection and Version grabbing
    					ie = false;
    					if (navigator.appName == "Microsoft Internet Explorer") {
    					    ie = true;
    					    var ua = navigator.userAgent;
    					    var re = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
    					    if (re.exec(ua) != null) {
    					        ieVersion = parseInt(RegExp.$1)
    					    }
    					}

    				  if(ie && ieVersion <= 9) {
    					  document.write('<h1 style="margin:20px 0px; font-size: 20px">Just a moment while your game loads...</h1>');
    				  } else {
    					  document.write('<h1 style="margin:20px 0px; font-size: 20px">Just a moment while your game loads</h1><div class="circle"></div><div class="circle"></div><div class="circle"></div><div class="circle"></div>');
    				  }
  			     </script>
			     </div>
    </div>
  
  

                    <!-- Pre-Content Video Player -->
        <div id="my-content">
        
          <div class="field-game" id="swfgamewrapper">
            <iframe1 src="http://www.coolmath-games.com/gameFrame?u=sites/cmatgame/files/games/ShipLoaderCoolMath-Events.swf&f=ShipLoaderCoolMath-Events.swf" class="Single rounded-2"  width="640px" height="480px" id="swfgame" scrolling="no" marginwidth="0" vspace="0" frameborder="0" hspace="0" marginheight="0"></iframe1>
          </div> 

        </div>
        
       <div id="pw-video-player"></div>
        
        
  

  

            <!--Start of Preloader call -->
        <div id="afg_preloader">

          <div id="container123">

            <div id="videoplayer">
              <video id="content123" style="height:1px;width:640px;">
                <source src="//www.coolmath-games.com/sites/cmatgame/files/adtesting/DummyVideo.mov"></source>
              </video>
              <div id="adcontainer" style="height:480px;width:640px;"></div>
            </div>
        </div>
              <script type="text/javascript" src="https://cdn.intergi.com/pageos/js/libs/cmg-prebid-1.40.0.js"></script>
              <script type="text/javascript" src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>

          <script type="text/javascript">
                      var videoAdUnit = {
                      code: 'video',
                      mediaTypes: {
                        video: {
                          context: 'instream',
                          playerSize: [640, 480]
                        },
                      },
                      bids: [{
                        bidder: 'appnexus',
                        params: {
                          placementId: 14548822
                        }
                      }, {
                        bidder: 'rubicon',
                        params: {
                          accountId: "12556",
                          siteId: "240994",
                          zoneId: "1188846",
                          video: {
                            language: "en",
                            playerHeight: 480,
                            playerWidth: 640,
                            size_id: 201
                          }
                        }
                      },{
                        bidder: 'openx',
                        params: {
                          unit: '540570748',
                          delDomain: 'playwire-d.openx.net',
                          openrtb: {
                            imp: [
                              {
                                video: {
                                    mimes: ['video/x-ms-wmv, video/mp4']
                                  }
                              }
                            ]
                          }
                        }
                      }]
                    }


                    let bidderSettings = {
                          'standard': {
                            'alwaysUseBid': false,
                            'adserverTargeting': [{
                                'key': 'hb_bidder',
                                'val': function(bidResponse){
                                  if(bidResponse.bidder === 'appnexus') {
                                    return 'appnexusAst'
                                  }
                                  return  bidResponse.bidder
                                }
                              },
                              {
                                'key': 'hb_val',
                                'val': function(bidResponse){
                    
                                  return bidResponse.cpm.toFixed(2);
                    
                                }
                              }
                            ]
                          }
                        }

                      if(typeof cmgpbjs !== "undefined") {
                        cmgpbjs.que.push(function () {
                        
                          cmgpbjs.bidderSettings = bidderSettings;
                          cmgpbjs.addAdUnits(videoAdUnit);
                        
                          cmgpbjs.setConfig({
                            bidderSequence: 'fixed',
                            
                            /* Or whatever your preferred video cache URL is */
                            cache: {
                              url: 'https://prebid.adnxs.com/pbc/v1/cache'
                            },
                            enableSendAllBids: false,
                          });
                          
                        });
                      }

                      function startAuction(){
                        if(typeof cmgpbjs !== "undefined") {
                          cmgpbjs.que.push(function() {
                            cmgpbjs.requestBids({
                              timeout: 2500,
                              bidsBackHandler: function(bids){
                                var videoUrl = cmgpbjs.adServers.dfp.buildVideoUrl({
                                    adUnit: videoAdUnit,
                                            params: {
                                            iu: '/137548614/1023174/71134/1023174-71134-video',
                                            description_url: window.location.href, // add dynamic URL - window.location.url
                                            env: 'vp',         
                                            impl: 's',
                                            correlator:Date.now(), // add dynamic correlator timestamp
                                            tfcd: '0',
                                            output: 'vast',
                                            sz: '640x480',
                                            unviewed_position_start: '1'
                                        }
                                    });
                        
                                    console.log("Preroll Headerbidding video URL:::::"+ videoUrl);
                        
                                    application = new Application( true, videoUrl );
                                }
                            });
                          }); 
                        } else { //ad blocker
                          application = new Application( false, "videoUrl" );
                        }
                      
                      }

                      /**
                        * Handles user interaction and creates the player and ads controllers.
                        */
                var Application = function(displayAds,adTagUrl) {
                  this.playing_ = false;
                  this.adsActive_ = false;
                  this.adsDone_ = false;
                  if(typeof displayAds === 'undefined' || displayAds === null) {
                    this.displayAds = true;
                  } else {
                    this.displayAds = displayAds;
                  }
                  this.adTagUrl_ = adTagUrl;
                  
                  this.videoPlayer_ = new VideoPlayer();
                  if(this.displayAds && typeof targeted_state === 'undefined') {
                    //console.log("Preload ads for non subscription time games");
                    this.ads_ = new Ads(this, this.videoPlayer_);
                    //Adx Preroll Tag with fallback display Ad
                    // The user clicked/tapped - inform the ads controller that this code
                    // is being run in a user action thread.
                    this.ads_.initialUserAction();
                    // At the same time, initialize the content player as well.
                    // When content is loaded, we'll issue the ad request to prevent it
                    // from interfering with the initialization. See
                    // https://developers.google.com/interactive-media-ads/docs/sdks/html5/v3/ads#iosvideo
                    // for more information.
                    this.videoPlayer_.preloadContent(this.bind_(this, this.loadAds_));
                    this.adsDone_ = true;
                  } else {
                    //console.log("Do not preload ads for free trial user");
                    removePrerollAndDisplayGame();
                  }
                };

          Application.prototype.bind_ = function(thisObj, fn) {
            return function() {
              fn.apply(thisObj, arguments);
            };
          };

          Application.prototype.loadAds_ = function() {
            this.ads_.requestAds(this.adTagUrl_);
          };

          /**
           * Handles video player functionality.
           */
          var VideoPlayer = function() {
            this.contentPlayer = document.getElementById('content123');
            this.adContainer = document.getElementById('adcontainer');
            this.videoPlayerContainer_ = document.getElementById('videoplayer');
            this.width = 640;
            this.height = 480;
          };

          VideoPlayer.prototype.preloadContent = function(contentLoadedAction) {
              contentLoadedAction();
          };
          VideoPlayer.prototype.play = function() {
            this.contentPlayer.play();
          };

          VideoPlayer.prototype.pause = function() {
            this.contentPlayer.pause();
          };


          /**
           * Shows how to use the IMA SDK to request and display ads.
           */
          var Ads = function(application, videoPlayer) {
            this.application_ = application;
            this.videoPlayer_ = videoPlayer;
            this.customClickDiv_ = document.getElementById('customClick');
            this.contentCompleteCalled_ = false;
            google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);
            // Call setLocale() to localize language text and downloaded swfs
            // google.ima.settings.setLocale('fr');
            this.adDisplayContainer_ =
                new google.ima.AdDisplayContainer(
                    this.videoPlayer_.adContainer,
                    this.videoPlayer_.contentPlayer,
                    this.customClickDiv_);
            this.adsLoader_ = new google.ima.AdsLoader(this.adDisplayContainer_);
            this.adsManager_ = null;

            this.adsLoader_.addEventListener(
                google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
                this.onAdsManagerLoaded_,
                false,
                this);
            this.adsLoader_.addEventListener(
                google.ima.AdErrorEvent.Type.AD_ERROR,
                this.onAdError_,
                false,
                this);
          };

          // On iOS and Android devices, video playback must begin in a user action.
          // AdDisplayContainer provides a initialize() API to be called at appropriate
          // time.
          // This should be called when the user clicks or taps.
          Ads.prototype.initialUserAction = function() {
            this.adDisplayContainer_.initialize();
            this.videoPlayer_.contentPlayer.load();

          };

          Ads.prototype.requestAds = function(adTagUrl) {
            var adsRequest = new google.ima.AdsRequest();
            adsRequest.adTagUrl = adTagUrl;
            adsRequest.linearAdSlotWidth = this.videoPlayer_.width;
            adsRequest.linearAdSlotHeight = this.videoPlayer_.height;
            adsRequest.nonLinearAdSlotWidth = this.videoPlayer_.width;
            adsRequest.nonLinearAdSlotHeight = this.videoPlayer_.height;
            this.adsLoader_.requestAds(adsRequest);
          };

          Ads.prototype.onAdsManagerLoaded_ = function(adsManagerLoadedEvent) {
            //console.log('Ads loaded.');
            var adsRenderingSettings = new google.ima.AdsRenderingSettings();
            //adsRenderingSettings.loadVideoTimeout = 4000;
            adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete = true;
            this.adsManager_ = adsManagerLoadedEvent.getAdsManager(
                this.videoPlayer_.contentPlayer, adsRenderingSettings);
            this.adsManager_.setVolume(0);
            this.processAdsManager_(this.adsManager_);
          };

          Ads.prototype.processAdsManager_ = function(adsManager) {
            if (adsManager.isCustomClickTrackingUsed()) {
              this.customClickDiv_.style.display = 'table';
            }
            // Handle errors.
            adsManager.addEventListener(
                google.ima.AdErrorEvent.Type.AD_ERROR,
                this.onAdError_,
                false,
                this);
            var events = [google.ima.AdEvent.Type.ALL_ADS_COMPLETED,
                          google.ima.AdEvent.Type.COMPLETE,
                          google.ima.AdEvent.Type.FIRST_QUARTILE,
                          google.ima.AdEvent.Type.LOADED,
                          google.ima.AdEvent.Type.MIDPOINT,
                          google.ima.AdEvent.Type.STARTED,
                          google.ima.AdEvent.Type.THIRD_QUARTILE, google.ima.AdEvent.Type.USER_CLOSE];
            for (var index in events) {
              adsManager.addEventListener(
                  events[index],
                  this.onAdEvent_,
                  false,
                  this);
            }

            var initWidth, initHeight;

              initWidth = this.videoPlayer_.width;
              initHeight = this.videoPlayer_.height;

            adsManager.init(
              initWidth,
              initHeight,
              google.ima.ViewMode.NORMAL);

            adsManager.start();
          };


          Ads.prototype.onAdEvent_ = function(adEvent) {
            console.log('Ad event1: ' + adEvent.type);
            if (adEvent.type == google.ima.AdEvent.Type.LOADED) {
              var ad = adEvent.getAd();
              jQuery("#content123").hide();
            }
            if (adEvent.type == google.ima.AdEvent.Type.ALL_ADS_COMPLETED) {
              removePrerollAndDisplayGame();
            }
            if (adEvent.type == google.ima.AdEvent.Type.USER_CLOSE) {
              removePrerollAndDisplayGame();
            }
          };

          Ads.prototype.onAdError_ = function(adErrorEvent) {
            console.log('Ad error: ' + adErrorEvent.getError().toString());
            if (this.adsManager_) {
              this.adsManager_.destroy();
            }
            //TODO remove the ad slot and display the game
            //this.application_.resumeAfterAd();
            removePrerollAndDisplayGame();
          };

          if(Drupal.settings.isSubscriptionActive == false && getCookie('cmg_l') !== null) {
            subscribeNowAlienClass = "subscribe-now-alien-subscribe";
          }else if(getCookie('cmg_l') == null) {
            subscribeNowAlienClass = "subscribe-now-alien";
          }else if(getCookie('cmg_l') == null && subscriberLeg == 'Default Leg') {
            subscribeNowAlienClass = "subscribe-now-signup";
          }
          
          var cmatgame_subscriber = getCookie('cmg_sx');
          var validSubscriber = false;
          if(typeof cmatgame_subscriber !== 'undefined' && cmatgame_subscriber !== null ) {
           validSubscriber = true;
          }
          var application = null;
          var freeGamesExceeded = true;
          //display Ads to anonymous users the time from 7am to 13pm, display ads to anonymous users
          //  from 13pm to 11:59pm and 00 to 7am only if the user is not from New York city
          //  TODO -->  Need to add day of the week for school hours logic, day < 6 
          if(validSubscriber){ 
              //valid subscriber do not display Preroll Ads
              var adTagUrl = "";
              application = new Application(false,adTagUrl);
          } else if(getCookie('cmg_schwl') !== null ||  typeof cmg_no_ads !== 'undefined' || (!validSubscriber && schoolHours  || ( !schoolHours && !targetStateUser )  || ( !schoolHours && targetStateUser && getCookie('cmg_active_anonymous_user') !== null) )) {
              cmg_gdpr_check = getCookie("GDPR");
              var cmg_gdpr_first_check = getCookie("GDPR_First");
              var cmg_gdpr_reject_check = getCookie("GDPR_Reject");
              //remove ads for first party cookies or reject all cookies is present along with GDPR cookie
              if(cmg_gdpr_check !== null && (cmg_gdpr_first_check != null || cmg_gdpr_reject_check !== null)) {
                var adTagUrl = "";
                application = new Application(false,adTagUrl);
              } else if(getCookie('cmg_schwl') !== null ||  typeof cmg_no_ads !== 'undefined') {
                var adTagUrl = "";
                    application = new Application(false,adTagUrl);
                    jQuery("#videoplayer").remove();
            } else {
                     /* Playwire video ad unit */
                  var adTagUrl = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/137548614/1023174/71134/1023174-71134-video&description_url=https%3A%2F%2Fwww.coolmathgames.com%2F&env=vp&impl=s&correlator=&tfcd=0&npa=0&gdfp_req=1&output=vast&sz=640x480&unviewed_position_start=1';
                  console.log("playwire preroll ad tag :::::" + adTagUrl);
                  jQuery("#afg_preloader").append('<div id="continue-container"><div id="continue-link">Continue in </div><span id="timer_div" style="margin-left:5px;">15</span></div>');   
                  var swf_game_url = jQuery("#swfgame").attr("src");
                  if( (typeof swf_game_url !== 'undefined'|| window.location.pathname === "/0-poptropica")  && !checkIfFlashIsEnabled()){ 
                    application = new Application(false,adTagUrl);
                  } else {
                    if(window.location.pathname !== "/0-basketball-master-2") {
                      application = new Application(true,adTagUrl);  
                    } else {  //use headerbidding for basketball master 2 game
                      startAuction();
                    }
                  }                   
                     
            }
          if(!/0-chess/.test(window.location.pathname)) {
            //setCookie('cmg_active_anonymous_user', 'active', 30*60*1000);
          }
          } else if(!validSubscriber && !schoolHours && targetStateUser && getCookie('cmg_active_anonymous_user') === null && getCookie('cmg_editor') === null) {
              //if user comes from google dont show the subscription paywall
              var ref = document.referrer;
              //count number of games played by the user this month
              userPlayedGames = 0;
              var userFreeGameList = [];
              var freeGameNid = 10311;
              if(sessionStorage.getItem("userFreeGameList") !== null) {
                userFreeGameList = JSON.parse(sessionStorage.getItem("userFreeGameList"));
              }
              //if(localStorage.getItem("userPlayedGames"+currentMonth+currentYear) == null) {
              if((localStorage.getItem("userPlayedGames") == null || getCookie('cmg_upg') === null) && freeGameLimit !== 0) {
                userPlayedGames = 1;
                //localStorage.setItem("userPlayedGames"+currentMonth+currentYear,userPlayedGames);
                localStorage.setItem("userPlayedGames",userPlayedGames);
                setCookie('cmg_upg', 'true', cmg_upg_days_limit * 24*60*60*1000);
                userFreeGameList = [freeGameNid];
                sessionStorage.setItem("userFreeGameList", JSON.stringify(userFreeGameList));
                var adTagUrl = "";
                application = new Application(false,adTagUrl);
                jQuery("#videoplayer").remove();
              } else {
                //userPlayedGames = parseInt(localStorage.getItem("userPlayedGames"+currentMonth+currentYear));//monthly limit
                if(localStorage.getItem("userPlayedGames") !== null && getCookie('cmg_upg') !== null) {
                  userPlayedGames = parseInt(localStorage.getItem("userPlayedGames"));//lifetime limit
                } else {
                  userPlayedGames = 0;
                  setCookie('cmg_upg', 'true', cmg_upg_days_limit * 24*60*60*1000);
                }
                if(freeGameLimit !== 0 && userPlayedGames < freeGameLimit && userFreeGameList.indexOf(freeGameNid) === -1) {
                  userPlayedGames++;
                  freeGamesExceeded = false;
                  if(userFreeGameList.length > 0) {
                    userFreeGameList = userFreeGameList.concat(freeGameNid);
                  } else {
                    userFreeGameList = [freeGameNid];
                  }
                  localStorage.setItem("userPlayedGames",userPlayedGames);
                  sessionStorage.setItem("userFreeGameList", JSON.stringify(userFreeGameList));
                } else {
                  freeGamesExceeded = true;
                }

                var validReferer = false;
                var validGameSession = false;
                if(userFreeGameList.indexOf(freeGameNid) > -1) {
                  validGameSession = true;
                }
                if(ref.match("google.com") !== null || ref.match("yahoo.com") !== null || ref.match("bing.com") !== null) {
                  validReferer = true;
                }
                subscriptionSignUpUrl();
                var alreadySubscriberText = '<p class="already-subscribed">Already a Subscriber? <a class="learn-more-link" href="/user/login">Login</a></p>';
                if(getCookie('cmg_l') != null) {
                  alreadySubscriberText = '';
                }
                var headLine = '<p class="no-free-games-headline">Please Sign up to keep playing</p>';
                if(Drupal.settings.isSubscriptionActive == false && getCookie('cmg_l') != null) {
                  headLine = '<p class="no-free-games-headline" style="padding-top:46px;">PLEASE SUBSCRIBE NOW TO KEEP PLAYING</p>';
                }
                            if(!validReferer && userPlayedGames >= freeGameLimit && !validGameSession) { //subscription paywall
                                //block anonymous users for New York City from 0-7am and 13pm to 11:59pm
                                clearInterval(intervalId);
                                jQuery("#afg_container").remove();
                                jQuery(".title-instructions").remove();
                                jQuery(".body-instructions").remove();
                  jQuery(".field-game").html('<div class="subscription-overlay" style="height:360px;width:500px;background:#008aa3;white-space:normal;">'+
                       headLine +
                      '<p class="free-in-schools">The World\'s Best Collection of Games <br>For Logic, Reasoning & Fun!  '+
                      '<a class="'+ subscribeNowAlienClass +'" onclick="subscription_promo_handler();" href="' + signUpURL + ' ">Subscribe Now</a>' +
                      alreadySubscriberText+'</div>');
                  jQuery("#videoplayer").remove();
                  //localStorage.setItem("userPlayedGames"+currentMonth+currentYear,userPlayedGames);
                  //localStorage.setItem("userPlayedGames",userPlayedGames);
                } else {
                  var adTagUrl = "";
                  application = new Application(false,adTagUrl);
                  //localStorage.setItem("userPlayedGames"+currentMonth+currentYear,userPlayedGames);//monthly limit
                  //localStorage.setItem("userPlayedGames",userPlayedGames);//lifetime limit
                }
              }
              
          }
          </script>

        </div>
    <script type="text/javascript">
      function removeAdSwf() {
        removePrerollAndDisplayGame();
      }
      function noAdsReturned() {
          // enable_preroll_fallback_ads is false
      removePrerollAndDisplayGame();
          }
    </script>


        



  




 	    	    <div class = "title-instructions" id="game-instructions">Instructions</div>
	  	  	    	      <div class = "body-instructions"><p>Use your mouse to pick up the cargo and place it in the ship. Hold your mouse button down to grab and hold the cargo.</p>
</div>
	    	    

</article>

<script type="text/javascript">
  
	jQuery(document).ready(function(){

       cmatgame_subscriber = getCookie("cmg_sx");
      //check if school is whitelisted
      if(cmg_school_whitelisted !== null && getCookie("cmg_schwl") !== null) {
        cmg_school_whitelisted = getCookie("cmg_schwl");
        cmatgame_subscriber = getCookie("cmg_schwl");
      } else if(cmg_school_whitelisted === null && typeof cmg_no_ads_debug !== "undefined" && cmg_no_ads_debug) {
        //console.log("KY school hours");
        cmatgame_subscriber = cmg_no_ads_debug;
      }
      if(cmg_gdpr_check !== null) {
        var cmg_gdpr_all_check = getCookie("GDPR_All");  //GDPR_All cookie is set when user selects accept all cookies in the GDPR overlay
        var cmg_gdpr_first_check = getCookie("GDPR_First");
        var cmg_gdpr_reject_check = getCookie("GDPR_Reject");
        if(cmg_gdpr_all_check == null && (cmg_gdpr_first_check != null || cmg_gdpr_reject_check !=null)) {  //user either accepted only first party cookies or rejected all cookies so do not display ads
          cmatgame_subscriber = getCookie("GDPR");
        } else if(cmg_gdpr_all_check == null && cmg_gdpr_first_check == null && cmg_gdpr_reject_check ==null) {  //user is coming for the first time from one of the GDPR countries so do not display ads
          cmatgame_subscriber = getCookie("GDPR");
        }
      }
     if(getCookie('cmg_editor') !== null) { //display game for editors
      removePrerollAndDisplayGame();
     }
    /*  
    //preroll Ads
    if((typeof cmatgame_subscriber === "undefined" || cmatgame_subscriber === "" || cmatgame_subscriber === null || typeof freeTrialUser === "undefined"  ) && !freeTrialUser) {
      // Create Pre-Content Video Player
      var pwVideoContainer = document.getElementById('pw-video-player');
      var myContentContainer = document.getElementById('my-content');
      var pwVideoPlayer = document.createElement('script');
      pwVideoPlayer.setAttribute('charset', 'utf-8'); 
      pwVideoPlayer.setAttribute('data-config', '//config.playwire.com/1023174/v2/pre_content.json');  
      pwVideoPlayer.setAttribute('data-width', '100%'); 
      pwVideoPlayer.setAttribute('data-height', '100%');  
      pwVideoPlayer.setAttribute('data-hidden-container', 'my-content');  
      pwVideoPlayer.setAttribute('data-id', 'cmg-player'); 
      pwVideoPlayer.setAttribute('data-onready', 'playerEvents'); 
      pwVideoPlayer.setAttribute('src', '//cdn.playwire.com/bolt/js/zeus/embed.js');  
      pwVideoPlayer.setAttribute('type', 'text/javascript');
      pwVideoContainer.appendChild(pwVideoPlayer); 
    } else {
      if( typeof cmatgame_subscriber !== "undefined" &&  cmatgame_subscriber !== "" && cmatgame_subscriber !== null ) {
        //Active subscriber so remove ads and display Game
        removePrerollAndDisplayGame();
      } else {
        //Non subscribers
        cmatgame_premium_subscription_game_display();  
      }
      
    }
    */

    //VooxeVideo
    if(jQuery('#videoContainer').length && typeof VooxeVideo === 'undefined') {
      trackEvent('Video Walkthrough', 'Walkthrough video not found', document.title);
       jQuery('#videoContainer').hide();
    }
  })
</script>
